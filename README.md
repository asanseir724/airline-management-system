# سامانه مدیریت درخواست‌های آژانس هواپیمایی

این پروژه یک سامانه جامع برای مدیریت درخواست‌های کنسلی، استرداد، و تغییر بلیط در آژانس‌های هواپیمایی است که قابلیت ارسال پیامک و اطلاع‌رسانی از طریق تلگرام را دارد.

## ویژگی‌ها

- ثبت و مدیریت درخواست‌های استرداد داخلی
- ثبت و پیگیری درخواست‌های استرداد مشتریان
- ارسال پیامک خودکار در تغییر وضعیت‌ها
- ارسال اطلاعیه در کانال تلگرام
- پشتیبان‌گیری خودکار از اطلاعات
- مدیریت تورهای گردشگری (در حال حاضر غیرفعال)
- مدیریت سیستم و گزارش‌گیری

## نصب و راه‌اندازی سریع

### پیش‌نیازها

- Node.js نسخه 20 یا بالاتر
- PostgreSQL
- دسترسی به اینترنت برای نصب وابستگی‌ها

### نصب با یک دستور

فقط کافیست دستور زیر را اجرا کنید:

```bash
bash setup.sh
```

این اسکریپت به صورت خودکار:
1. بررسی و نصب Node.js (در صورت نیاز)
2. نصب تمامی وابستگی‌های پروژه
3. ایجاد فایل‌های محیطی مورد نیاز
4. راه‌اندازی دیتابیس و اعمال مایگریشن‌ها
5. راهنمای اجرای برنامه را نمایش می‌دهد

### نصب دستی

اگر می‌خواهید به صورت دستی نصب کنید، مراحل زیر را دنبال کنید:

1. نصب وابستگی‌ها:
```bash
npm install
```

2. ایجاد فایل .env در مسیر اصلی پروژه با محتوای زیر:
```
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/airline?schema=public
SESSION_SECRET=your_session_secret_here
AMOOTSMS_TOKEN=your_amootsms_token_here
```

3. اجرای مایگریشن‌های دیتابیس:
```bash
npm run db:push
```

4. اجرای برنامه در محیط توسعه:
```bash
npm run dev
```

5. مرورگر را باز کنید و به آدرس `http://localhost:5000` بروید

## راهنمای استفاده

### اطلاعات ورود به سیستم
- **نام کاربری**: skyro
- **رمز عبور**: 123456

### امکانات اصلی
- **داشبورد**: نمایش خلاصه وضعیت سیستم و آمار درخواست‌ها
- **مدیریت درخواست‌ها**: ثبت و پیگیری درخواست‌های استرداد داخلی
- **فرم درخواست جدید**: ایجاد درخواست جدید برای کارمندان
- **مدیریت پیامک‌ها**: تنظیم قالب‌های پیامک و مشاهده تاریخچه ارسال
- **اتصال به تلگرام**: تنظیم ربات تلگرام برای اطلاع‌رسانی
- **بک‌آپ‌گیری**: تنظیمات پشتیبان‌گیری خودکار و مشاهده تاریخچه
- **مدیریت سیستم**: لاگ‌های سیستم و تنظیمات عمومی

## راهنمای فعال‌سازی سیستم تور

سیستم تور در حال حاضر غیرفعال است. برای فعال‌سازی مجدد:

1. فایل `client/src/components/airline-layout.tsx` را باز کنید
2. بخش کامنت شده مربوط به تور را از حالت کامنت خارج کنید:
```jsx
// سیستم تور غیرفعال است - برای فعال‌سازی مجدد، کامنت زیر را بردارید
{
  title: "سیستم تورهای گردشگری",
  items: tourSystemItems,
}
```

## فناوری‌های استفاده شده

- **Frontend**: React، TypeScript، Tailwind CSS، Shadcn UI
- **Backend**: Node.js، Express
- **Database**: PostgreSQL، Drizzle ORM
- **Authentication**: Passport.js
- **Notifications**: AmootSMS API، Telegram Bot API
- **Data Extraction**: Puppeteer، Cheerio، API Scrapers